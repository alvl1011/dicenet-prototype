<app-header title="News" [isMainScreen]="true"></app-header>

<div class="categories d-flex justify-content-around">
  <div [class.active]="isActiveAll" (click)="changeState('All')" class="text-center w-50 pt-2 text-white pb-2">All</div>
  <div [class.active]="isActiveTableTop" (click)="changeState('Tabletop')" class="text-center text-white w-50 pt-2 pb-2">Boards</div>
  <div [class.active]="isActiveEvents" (click)="changeState('Events')" class="text-center w-50 text-white pt-2 pb-2">Events</div>
</div>
<ion-content appSideSwipe
             (swipeRight)="nextPage()">
  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content
      pullingIcon="chevron-down-circle-outline"
      refreshingSpinner="circles">
    </ion-refresher-content>
  </ion-refresher>
  <div
       *ngFor="let singleNews of news"
       (click)="onClick(singleNews)">
    <div *ngIf="isActiveAll" class="news d-flex justify-content-left">
      <img class="image-preview" [src]="singleNews.imagePreview"/>
      <div class="ps-2 pt-2">
        <h5>{{ singleNews.newsTitle }}</h5>
        <div class="text">
          <ion-icon name="pencil-outline"></ion-icon> Author: {{ singleNews.user.firstname + " " + singleNews.user.lastname}}
        </div>
        <div class="text">
          <ion-icon name="calendar"></ion-icon> Published at: {{ singleNews.createdAt | date: 'dd-MM-YYYY' }}
        </div>
        <hr class="mt-3">
        <div class="d-flex justify-content-between">
          <div class="status fw-bold"> {{ getAge(singleNews) }}</div>
        </div>
      </div>
    </div>
    <div *ngIf="isActiveTableTop && singleNews.category === 'Tabletop'" class="news d-flex justify-content-left">
      <img class="image-preview" [src]="singleNews.imagePreview"/>
      <div class="ps-2 pt-2">
        <h5>{{ singleNews.newsTitle }}</h5>
        <div class="text">
          <ion-icon name="pencil-outline"></ion-icon> Author: {{ singleNews.user.firstname + " " + singleNews.user.lastname}}
        </div>
        <div class="text">
          <ion-icon name="calendar"></ion-icon> Published at: {{ singleNews.createdAt | date: 'dd-MM-YYYY' }}
        </div>
        <hr class="mt-3">
        <div class="d-flex justify-content-between">
          <div class="status fw-bold"> {{ getAge(singleNews) }}</div>
        </div>
      </div>
    </div>
    <div *ngIf="isActiveEvents && singleNews.category === 'Events'" class="news d-flex justify-content-left">
      <img class="image-preview" [src]="singleNews.imagePreview"/>
      <div class="ps-2 pt-2">
        <h5>{{ singleNews.newsTitle }}</h5>
        <div class="text">
          <ion-icon name="pencil-outline"></ion-icon> Author: {{ singleNews.user.firstname + " " + singleNews.user.lastname}}
        </div>
        <div class="text">
          <ion-icon name="calendar"></ion-icon> Published at: {{ singleNews.createdAt | date: 'dd-MM-YYYY' }}
        </div>
        <hr class="mt-3">
        <div class="d-flex justify-content-between">
          <div class="status fw-bold"> {{ getAge(singleNews) }}</div>
        </div>
      </div>
    </div>
  </div>
  <ion-buttons class="d-flex justify-content-end pt-4">
    <ion-button (click)="addNews()">
      <ion-icon name="add-outline"></ion-icon>
    </ion-button>
  </ion-buttons>
</ion-content>
